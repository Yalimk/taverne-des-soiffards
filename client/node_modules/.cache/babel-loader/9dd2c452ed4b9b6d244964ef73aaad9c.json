{"ast":null,"code":"import { isLoggedIn } from \"../auth\";\nexport const createPost = async (userId, token, post) => {\n  try {\n    const response = await fetch(`${process.env.REACT_APP_API_URI}/post/new/${userId}`, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        Authorization: `Bearer ${token}`\n      },\n      body: post\n    });\n    return await response.json();\n  } catch (error) {\n    return console.error(`Couldn't post data to api because of error: ${error}.`);\n  }\n};\nexport const listAllPosts = async () => {\n  try {\n    const response = await fetch(`${process.env.REACT_APP_API_URI}/posts`, {\n      method: \"GET\"\n    });\n    return await response.json();\n  } catch (error) {\n    return console.error(`Couldn't get response from api because of error: ${error}.`);\n  }\n};\nexport const viewPost = async postId => {\n  try {\n    const response = await fetch(`${process.env.REACT_APP_API_URI}/post/${postId}`, {\n      method: \"GET\"\n    });\n    return await response.json();\n  } catch (error) {\n    return console.error(`Couldn't get response from api because of error: ${error}.`);\n  }\n};\nexport const listUserPosts = async userId => {\n  try {\n    const token = isLoggedIn().token;\n    const response = await fetch(`${process.env.REACT_APP_API_URI}/posts/by/${userId}`, {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${token}`,\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    return await response.json();\n  } catch (error) {\n    return console.error(`Couldn't get response from api because of error: ${error}.`);\n  }\n};","map":{"version":3,"sources":["C:/Users/virtuoworks/Desktop/taverne-des-soiffards/front-end/src/post/apiPost.js"],"names":["isLoggedIn","createPost","userId","token","post","response","fetch","process","env","REACT_APP_API_URI","method","headers","Accept","Authorization","body","json","error","console","listAllPosts","viewPost","postId","listUserPosts"],"mappings":"AAAA,SAASA,UAAT,QAA2B,SAA3B;AAEA,OAAO,MAAMC,UAAU,GAAG,OAAOC,MAAP,EAAeC,KAAf,EAAsBC,IAAtB,KAA+B;AACvD,MAAI;AACF,UAAMC,QAAQ,GAAG,MAAMC,KAAK,CACzB,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,aAAYP,MAAO,EAD1B,EAE1B;AACEQ,MAAAA,MAAM,EAAE,MADV;AAEEC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE,kBADD;AAEPC,QAAAA,aAAa,EAAG,UAASV,KAAM;AAFxB,OAFX;AAMEW,MAAAA,IAAI,EAAEV;AANR,KAF0B,CAA5B;AAWA,WAAO,MAAMC,QAAQ,CAACU,IAAT,EAAb;AACD,GAbD,CAaE,OAAOC,KAAP,EAAc;AACd,WAAOC,OAAO,CAACD,KAAR,CACJ,+CAA8CA,KAAM,GADhD,CAAP;AAGD;AACF,CAnBM;AAqBP,OAAO,MAAME,YAAY,GAAG,YAAY;AACtC,MAAI;AACF,UAAMb,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,QAAlC,EAA2C;AACrEC,MAAAA,MAAM,EAAE;AAD6D,KAA3C,CAA5B;AAGA,WAAO,MAAML,QAAQ,CAACU,IAAT,EAAb;AACD,GALD,CAKE,OAAOC,KAAP,EAAc;AACd,WAAOC,OAAO,CAACD,KAAR,CACJ,oDAAmDA,KAAM,GADrD,CAAP;AAGC;AACJ,CAXM;AAaP,OAAO,MAAMG,QAAQ,GAAG,MAAOC,MAAP,IAAkB;AACxC,MAAI;AACF,UAAMf,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,SAAQW,MAAO,EAAjD,EAAoD;AAC9EV,MAAAA,MAAM,EAAE;AADsE,KAApD,CAA5B;AAGA,WAAO,MAAML,QAAQ,CAACU,IAAT,EAAb;AACD,GALD,CAKE,OAAOC,KAAP,EAAc;AACd,WAAOC,OAAO,CAACD,KAAR,CACJ,oDAAmDA,KAAM,GADrD,CAAP;AAGC;AACJ,CAXM;AAaP,OAAO,MAAMK,aAAa,GAAG,MAAOnB,MAAP,IAAkB;AAC7C,MAAI;AACF,UAAMC,KAAK,GAAGH,UAAU,GAAGG,KAA3B;AACA,UAAME,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,aAAYP,MAAO,EAArD,EAAwD;AAClFQ,MAAAA,MAAM,EAAE,KAD0E;AAElFC,MAAAA,OAAO,EAAE;AACPE,QAAAA,aAAa,EAAG,UAASV,KAAM,EADxB;AAEPS,QAAAA,MAAM,EAAE,kBAFD;AAGP,wBAAgB;AAHT;AAFyE,KAAxD,CAA5B;AAQA,WAAO,MAAMP,QAAQ,CAACU,IAAT,EAAb;AACD,GAXD,CAWE,OAAOC,KAAP,EAAc;AACd,WAAOC,OAAO,CAACD,KAAR,CACJ,oDAAmDA,KAAM,GADrD,CAAP;AAGC;AACJ,CAjBM","sourcesContent":["import { isLoggedIn } from \"../auth\";\r\n\r\nexport const createPost = async (userId, token, post) => {\r\n  try {\r\n    const response = await fetch(\r\n      `${process.env.REACT_APP_API_URI}/post/new/${userId}`,\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: post,\r\n      }\r\n    );\r\n    return await response.json();\r\n  } catch (error) {\r\n    return console.error(\r\n      `Couldn't post data to api because of error: ${error}.`\r\n    );\r\n  }\r\n};\r\n\r\nexport const listAllPosts = async () => {\r\n  try {\r\n    const response = await fetch(`${process.env.REACT_APP_API_URI}/posts`, {\r\n      method: \"GET\",\r\n    });\r\n    return await response.json();\r\n  } catch (error) {\r\n    return console.error(\r\n      `Couldn't get response from api because of error: ${error}.`\r\n      );\r\n    }\r\n};\r\n\r\nexport const viewPost = async (postId) => {\r\n  try {\r\n    const response = await fetch(`${process.env.REACT_APP_API_URI}/post/${postId}`, {\r\n      method: \"GET\",\r\n    });\r\n    return await response.json();\r\n  } catch (error) {\r\n    return console.error(\r\n      `Couldn't get response from api because of error: ${error}.`\r\n      );\r\n    }\r\n};\r\n\r\nexport const listUserPosts = async (userId) => {\r\n  try {\r\n    const token = isLoggedIn().token;\r\n    const response = await fetch(`${process.env.REACT_APP_API_URI}/posts/by/${userId}`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    });\r\n    return await response.json();\r\n  } catch (error) {\r\n    return console.error(\r\n      `Couldn't get response from api because of error: ${error}.`\r\n      );\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}