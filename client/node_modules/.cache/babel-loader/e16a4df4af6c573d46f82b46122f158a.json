{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";// Native modules import\nimport React,{Component}from\"react\";import{Link}from'react-router-dom';// Personal modules import\nimport{signup}from\"../../logic/auth/index\";var Signup=/*#__PURE__*/function(_Component){_inherits(Signup,_Component);var _super=_createSuper(Signup);function Signup(){var _this;_classCallCheck(this,Signup);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={pseudo:\"\",email:\"\",password:\"\",error:\"\",success:false};_this.handleChange=function(name){return function(event){_this.setState({error:\"\"});_this.setState(_defineProperty({},name,event.target.value));};};_this.signupForm=function(pseudo,email,password){return/*#__PURE__*/_jsxs(\"form\",{action:\"\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Name\",className:\"text-muted lead\",style:{fontWeight:\"bold\"},children:\"Pseudo\"}),/*#__PURE__*/_jsx(\"input\",{onChange:_this.handleChange(\"pseudo\"),type:\"text\",className:\"form-control\",value:pseudo,placeholder:\"Le nom qui sera visible par les autres utilisateurs de la Taverne\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Email\",className:\"text-muted lead\",style:{fontWeight:\"bold\"},children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{onChange:_this.handleChange(\"email\"),type:\"email\",className:\"form-control\",value:email,placeholder:\"Votre e-mail de contact (example : guy-tard@gmail.com)\",required:true}),/*#__PURE__*/_jsx(\"small\",{id:\"emailHelp\",className:\"form-text text-muted\",children:/*#__PURE__*/_jsx(\"em\",{children:\"Votre e-mail est strictement confidentiel et ne sera partag\\xE9 avec aucune tierce partie\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Password\",className:\"text-muted lead\",style:{fontWeight:\"bold\"},children:\"Mot de passe\"}),/*#__PURE__*/_jsx(\"input\",{onChange:_this.handleChange(\"password\"),type:\"password\",className:\"form-control\",value:password,placeholder:\"Ne communiquez jamais votre mot de passe \\xE0 qui que ce soit.\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{onClick:_this.signupSubmit,type:\"submit\",className:\"btn btn-raised btn-primary\",children:\"S'inscrire\"})]});};_this.signupSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var _this$state,pseudo,email,password,newUser,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_this$state=_this.state,pseudo=_this$state.pseudo,email=_this$state.email,password=_this$state.password;newUser={pseudo:pseudo,email:email,password:password};_context.prev=3;_context.next=6;return signup(newUser);case 6:response=_context.sent;_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](3);console.error(\"Couldn't get a response, type of response is \".concat(typeof response,\".\"));case 12:if(response.error){try{_this.setState({error:response.error});}catch(error){console.error(\"Couldn't change state because of error: \".concat(error,\".\"));}}else{try{_this.setState({pseudo:\"\",email:\"\",password:\"\",error:\"\",success:true});// setTimeout(() => {\n//   this.setState({\n//     success: false,\n//   });\n// }, 3000);\n}catch(error){console.error(\"Couldn't change state because of error: \".concat(error,\".\"));}}case 13:case\"end\":return _context.stop();}}},_callee,null,[[3,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(Signup,[{key:\"render\",value:function render(){var _this$state2=this.state,pseudo=_this$state2.pseudo,email=_this$state2.email,password=_this$state2.password,error=_this$state2.error,success=_this$state2.success;return/*#__PURE__*/_jsxs(\"div\",{className:\"container jumbotron\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mt-5 mb-5 text-center\",children:\"Inscription\"}),/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-warning\",style:{display:error?\"\":\"none\"},children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-success\",style:{display:success?\"\":\"none\"},children:[\"Ton compte vient d'\\xEAtre cr\\xE9\\xE9, pirate ! A la \",/*#__PURE__*/_jsx(Link,{to:\"/signin\",children:\"Taverne\"}),\", maintenant !\"]}),this.signupForm(pseudo,email,password)]});}}]);return Signup;}(Component);export default Signup;","map":{"version":3,"sources":["C:/Users/virtuoworks/Desktop/taverne-des-soiffards/client/src/pages/core/Signup.jsx"],"names":["React","Component","Link","signup","Signup","state","pseudo","email","password","error","success","handleChange","name","event","setState","target","value","signupForm","fontWeight","signupSubmit","preventDefault","newUser","response","console","display"],"mappings":"uxCAAA;AACA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,KAAqB,kBAArB,CAEA;AACA,OAASC,MAAT,KAAuB,wBAAvB,C,GAEMC,CAAAA,M,2TACJC,K,CAAQ,CACNC,MAAM,CAAE,EADF,CAENC,KAAK,CAAE,EAFD,CAGNC,QAAQ,CAAE,EAHJ,CAINC,KAAK,CAAE,EAJD,CAKNC,OAAO,CAAE,KALH,C,OAQRC,Y,CAAe,SAACC,IAAD,QAAU,UAACC,KAAD,CAAW,CAClC,MAAKC,QAAL,CAAc,CACZL,KAAK,CAAE,EADK,CAAd,EAGA,MAAKK,QAAL,oBACGF,IADH,CACUC,KAAK,CAACE,MAAN,CAAaC,KADvB,GAGD,CAPc,E,OASfC,U,CAAa,SAACX,MAAD,CAASC,KAAT,CAAgBC,QAAhB,CAA6B,CACxC,mBACE,cAAM,MAAM,CAAC,EAAb,wBACE,aAAK,SAAS,CAAC,YAAf,wBACE,cAAO,OAAO,CAAC,MAAf,CAAsB,SAAS,CAAC,iBAAhC,CAAkD,KAAK,CAAE,CAACU,UAAU,CAAE,MAAb,CAAzD,oBADF,cAIE,cACE,QAAQ,CAAE,MAAKP,YAAL,CAAkB,QAAlB,CADZ,CAEE,IAAI,CAAC,MAFP,CAGE,SAAS,CAAC,cAHZ,CAIE,KAAK,CAAEL,MAJT,CAKE,WAAW,CAAC,mEALd,CAME,QAAQ,KANV,EAJF,GADF,cAcE,aAAK,SAAS,CAAC,YAAf,wBACE,cAAO,OAAO,CAAC,OAAf,CAAuB,SAAS,CAAC,iBAAjC,CAAmD,KAAK,CAAE,CAACY,UAAU,CAAE,MAAb,CAA1D,oBADF,cAIE,cACE,QAAQ,CAAE,MAAKP,YAAL,CAAkB,OAAlB,CADZ,CAEE,IAAI,CAAC,OAFP,CAGE,SAAS,CAAC,cAHZ,CAIE,KAAK,CAAEJ,KAJT,CAKE,WAAW,CAAC,wDALd,CAME,QAAQ,KANV,EAJF,cAYE,cAAO,EAAE,CAAC,WAAV,CAAsB,SAAS,CAAC,sBAAhC,uBACE,iHADF,EAZF,GAdF,cA8BE,aAAK,SAAS,CAAC,YAAf,wBACE,cAAO,OAAO,CAAC,UAAf,CAA0B,SAAS,CAAC,iBAApC,CAAsD,KAAK,CAAE,CAACW,UAAU,CAAE,MAAb,CAA7D,0BADF,cAIE,cACE,QAAQ,CAAE,MAAKP,YAAL,CAAkB,UAAlB,CADZ,CAEE,IAAI,CAAC,UAFP,CAGE,SAAS,CAAC,cAHZ,CAIE,KAAK,CAAEH,QAJT,CAKE,WAAW,CAAC,gEALd,CAME,QAAQ,KANV,EAJF,GA9BF,cA2CE,eACE,OAAO,CAAE,MAAKW,YADhB,CAEE,IAAI,CAAC,QAFP,CAGE,SAAS,CAAC,4BAHZ,wBA3CF,GADF,CAqDD,C,OAEDA,Y,0FAAe,iBAAON,KAAP,yKACbA,KAAK,CAACO,cAAN,GADa,YAEuB,MAAKf,KAF5B,CAELC,MAFK,aAELA,MAFK,CAEGC,KAFH,aAEGA,KAFH,CAEUC,QAFV,aAEUA,QAFV,CAGPa,OAHO,CAGG,CAAEf,MAAM,CAANA,MAAF,CAAUC,KAAK,CAALA,KAAV,CAAiBC,QAAQ,CAARA,QAAjB,CAHH,uCAMML,CAAAA,MAAM,CAACkB,OAAD,CANZ,QAMXC,QANW,8FAQXC,OAAO,CAACd,KAAR,wDACkD,MAAOa,CAAAA,QADzD,OARW,QAYb,GAAIA,QAAQ,CAACb,KAAb,CAAoB,CAClB,GAAI,CACF,MAAKK,QAAL,CAAc,CACZL,KAAK,CAAEa,QAAQ,CAACb,KADJ,CAAd,EAGD,CAAC,MAAOA,KAAP,CAAc,CACdc,OAAO,CAACd,KAAR,mDAAyDA,KAAzD,OACD,CACF,CARD,IAQO,CACL,GAAI,CACF,MAAKK,QAAL,CAAc,CACZR,MAAM,CAAE,EADI,CAEZC,KAAK,CAAE,EAFK,CAGZC,QAAQ,CAAE,EAHE,CAIZC,KAAK,CAAE,EAJK,CAKZC,OAAO,CAAE,IALG,CAAd,EAOA;AACA;AACA;AACA;AACA;AACD,CAAC,MAAOD,KAAP,CAAc,CACdc,OAAO,CAACd,KAAR,mDAAyDA,KAAzD,OACD,CACF,CArCY,oE,uIAwCN,kBAC6C,KAAKJ,KADlD,CACCC,MADD,cACCA,MADD,CACSC,KADT,cACSA,KADT,CACgBC,QADhB,cACgBA,QADhB,CAC0BC,KAD1B,cAC0BA,KAD1B,CACiCC,OADjC,cACiCA,OADjC,CAEP,mBACE,aAAK,SAAS,CAAC,qBAAf,wBACE,WAAI,SAAS,CAAC,uBAAd,yBADF,cAGE,YACE,SAAS,CAAC,qBADZ,CAEE,KAAK,CAAE,CAAEc,OAAO,CAAEf,KAAK,CAAG,EAAH,CAAQ,MAAxB,CAFT,UAIGA,KAJH,EAHF,cASE,aACE,SAAS,CAAC,qBADZ,CAEE,KAAK,CAAE,CAAEe,OAAO,CAAEd,OAAO,CAAG,EAAH,CAAQ,MAA1B,CAFT,gFAI8C,KAAC,IAAD,EAAM,EAAE,CAAC,SAAT,qBAJ9C,oBATF,CAeG,KAAKO,UAAL,CAAgBX,MAAhB,CAAwBC,KAAxB,CAA+BC,QAA/B,CAfH,GADF,CAmBD,C,oBAvIkBP,S,EA0IrB,cAAeG,CAAAA,MAAf","sourcesContent":["// Native modules import\r\nimport React, { Component } from \"react\";\r\nimport { Link } from 'react-router-dom';\r\n\r\n// Personal modules import\r\nimport { signup } from \"../../logic/auth/index\";\r\n\r\nclass Signup extends Component {\r\n  state = {\r\n    pseudo: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    error: \"\",\r\n    success: false,\r\n  };\r\n\r\n  handleChange = (name) => (event) => {\r\n    this.setState({\r\n      error: \"\",\r\n    });\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  signupForm = (pseudo, email, password) => {\r\n    return (\r\n      <form action=\"\">\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"Name\" className=\"text-muted lead\" style={{fontWeight: \"bold\"}}>\r\n            Pseudo\r\n          </label>\r\n          <input\r\n            onChange={this.handleChange(\"pseudo\")}\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            value={pseudo}\r\n            placeholder=\"Le nom qui sera visible par les autres utilisateurs de la Taverne\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"Email\" className=\"text-muted lead\" style={{fontWeight: \"bold\"}}>\r\n            E-mail\r\n          </label>\r\n          <input\r\n            onChange={this.handleChange(\"email\")}\r\n            type=\"email\"\r\n            className=\"form-control\"\r\n            value={email}\r\n            placeholder=\"Votre e-mail de contact (example : guy-tard@gmail.com)\"\r\n            required\r\n          />\r\n          <small id=\"emailHelp\" className=\"form-text text-muted\">\r\n            <em>Votre e-mail est strictement confidentiel et ne sera partagé avec aucune tierce partie</em>\r\n          </small>\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"Password\" className=\"text-muted lead\" style={{fontWeight: \"bold\"}}>\r\n            Mot de passe\r\n          </label>\r\n          <input\r\n            onChange={this.handleChange(\"password\")}\r\n            type=\"password\"\r\n            className=\"form-control\"\r\n            value={password}\r\n            placeholder=\"Ne communiquez jamais votre mot de passe à qui que ce soit.\"\r\n            required\r\n          />\r\n        </div>\r\n        <button\r\n          onClick={this.signupSubmit}\r\n          type=\"submit\"\r\n          className=\"btn btn-raised btn-primary\"\r\n        >\r\n          S'inscrire\r\n        </button>\r\n      </form>\r\n    );\r\n  };\r\n\r\n  signupSubmit = async (event) => {\r\n    event.preventDefault();\r\n    const { pseudo, email, password } = this.state;\r\n    const newUser = { pseudo, email, password };\r\n    let response;\r\n    try {\r\n      response = await signup(newUser);\r\n    } catch (error) {\r\n      console.error(\r\n        `Couldn't get a response, type of response is ${typeof response}.`\r\n      );\r\n    }\r\n    if (response.error) {\r\n      try {\r\n        this.setState({\r\n          error: response.error,\r\n        });\r\n      } catch (error) {\r\n        console.error(`Couldn't change state because of error: ${error}.`);\r\n      }\r\n    } else {\r\n      try {\r\n        this.setState({\r\n          pseudo: \"\",\r\n          email: \"\",\r\n          password: \"\",\r\n          error: \"\",\r\n          success: true,\r\n        });\r\n        // setTimeout(() => {\r\n        //   this.setState({\r\n        //     success: false,\r\n        //   });\r\n        // }, 3000);\r\n      } catch (error) {\r\n        console.error(`Couldn't change state because of error: ${error}.`);\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { pseudo, email, password, error, success } = this.state;\r\n    return (\r\n      <div className=\"container jumbotron\">\r\n        <h2 className=\"mt-5 mb-5 text-center\">Inscription</h2>\r\n\r\n        <div\r\n          className=\"alert alert-warning\"\r\n          style={{ display: error ? \"\" : \"none\" }}\r\n        >\r\n          {error}\r\n        </div>\r\n        <div\r\n          className=\"alert alert-success\"\r\n          style={{ display: success ? \"\" : \"none\" }}\r\n        >\r\n          Ton compte vient d'être créé, pirate ! A la <Link to=\"/signin\">Taverne</Link>, maintenant !\r\n        </div>\r\n        {this.signupForm(pseudo, email, password)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Signup;\r\n"]},"metadata":{},"sourceType":"module"}