{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";export var read=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userId,token){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(process.env.REACT_APP_API_URI,\"/user/\").concat(userId),{method:\"GET\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}});case 3:response=_context.sent;return _context.abrupt(\"return\",response.json());case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);return _context.abrupt(\"return\",console.error(\"Couldn't get response from api because of error: \".concat(_context.t0,\".\")));case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function read(_x,_x2){return _ref.apply(this,arguments);};}();export var usersPerPage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(page){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"\".concat(process.env.REACT_APP_API_URI,\"/users/?page=\").concat(page),{method:\"GET\"});case 3:response=_context2.sent;return _context2.abrupt(\"return\",response.json());case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);return _context2.abrupt(\"return\",console.error(\"Couldn't get response from api because of error: \".concat(_context2.t0,\".\")));case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function usersPerPage(_x3){return _ref2.apply(this,arguments);};}();export var updateUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(userId,token,user){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetch(\"\".concat(process.env.REACT_APP_API_URI,\"/user/\").concat(userId),{method:\"PUT\",headers:{Accept:\"application/json\",Authorization:\"Bearer \".concat(token)},body:user});case 3:response=_context3.sent;return _context3.abrupt(\"return\",response.json());case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);return _context3.abrupt(\"return\",console.error(\"Couldn't put data to api because of error: \".concat(_context3.t0,\".\")));case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function updateUser(_x4,_x5,_x6){return _ref3.apply(this,arguments);};}();export var updateInfo=function updateInfo(user,next){if(typeof window!==\"undefined\"){if(localStorage.getItem(\"jwt\")){// console.log(`[front-end/src/user/apiUser.js => updateInfo:67] : inside if (localStorage.getItem('jwt'))`);\nvar auth=JSON.parse(localStorage.getItem(\"jwt\"));auth.user=user;localStorage.setItem(\"jwt\",JSON.stringify(auth));next();}}};export var remove=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(userId,token){var response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return fetch(\"\".concat(process.env.REACT_APP_API_URI,\"/user/\").concat(userId),{method:\"DELETE\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}});case 3:response=_context4.sent;return _context4.abrupt(\"return\",response.json());case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);return _context4.abrupt(\"return\",console.error(\"Couldn't get response from api because of error: \".concat(_context4.t0,\".\")));case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[0,7]]);}));return function remove(_x7,_x8){return _ref4.apply(this,arguments);};}();","map":{"version":3,"sources":["C:/Users/virtuoworks/Desktop/taverne-des-soiffards/client/src/logic/user/apiUser.js"],"names":["read","userId","token","fetch","process","env","REACT_APP_API_URI","method","headers","Accept","Authorization","response","json","console","error","usersPerPage","page","updateUser","user","body","updateInfo","next","window","localStorage","getItem","auth","JSON","parse","setItem","stringify","remove"],"mappings":"6VAAA,MAAO,IAAMA,CAAAA,IAAI,0FAAG,iBAAOC,MAAP,CAAeC,KAAf,qKAEOC,CAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,iBAAhB,kBAA0CL,MAA1C,EAAoD,CAC9EM,MAAM,CAAE,KADsE,CAE9EC,OAAO,CAAE,CACPC,MAAM,CAAE,kBADD,CAEP,eAAgB,kBAFT,CAGPC,aAAa,kBAAYR,KAAZ,CAHN,CAFqE,CAApD,CAFZ,QAEVS,QAFU,+CAUTA,QAAQ,CAACC,IAAT,EAVS,0FAYTC,OAAO,CAACC,KAAR,6EAZS,sEAAH,kBAAJd,CAAAA,IAAI,gDAAV,CAkBP,MAAO,IAAMe,CAAAA,YAAY,2FAAG,kBAAOC,IAAP,2KAEDb,CAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,iBAAhB,yBAAiDU,IAAjD,EAAyD,CACnFT,MAAM,CAAE,KAD2E,CAAzD,CAFJ,QAElBI,QAFkB,iDAKjBA,QAAQ,CAACC,IAAT,EALiB,8FAOjBC,OAAO,CAACC,KAAR,8EAPiB,wEAAH,kBAAZC,CAAAA,YAAY,8CAAlB,CAaP,MAAO,IAAME,CAAAA,UAAU,2FAAG,kBAAOhB,MAAP,CAAeC,KAAf,CAAsBgB,IAAtB,2KAGCf,CAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,iBAAhB,kBAA0CL,MAA1C,EAAoD,CAC9EM,MAAM,CAAE,KADsE,CAE9EC,OAAO,CAAE,CACPC,MAAM,CAAE,kBADD,CAEPC,aAAa,kBAAYR,KAAZ,CAFN,CAFqE,CAM9EiB,IAAI,CAAED,IANwE,CAApD,CAHN,QAGhBP,QAHgB,iDAWfA,QAAQ,CAACC,IAAT,EAXe,8FAafC,OAAO,CAACC,KAAR,wEAbe,wEAAH,kBAAVG,CAAAA,UAAU,sDAAhB,CAmBP,MAAO,IAAMG,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACF,IAAD,CAAOG,IAAP,CAAgB,CACxC,GAAI,MAAOC,CAAAA,MAAP,GAAkB,WAAtB,CAAmC,CACjC,GAAIC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAJ,CAAiC,CAC/B;AACA,GAAIC,CAAAA,IAAI,CAAGC,IAAI,CAACC,KAAL,CAAWJ,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAX,CAAX,CACAC,IAAI,CAACP,IAAL,CAAYA,IAAZ,CACAK,YAAY,CAACK,OAAb,CAAqB,KAArB,CAA4BF,IAAI,CAACG,SAAL,CAAeJ,IAAf,CAA5B,EACAJ,IAAI,GACL,CACF,CACF,CAVM,CAYP,MAAO,IAAMS,CAAAA,MAAM,2FAAG,kBAAO7B,MAAP,CAAeC,KAAf,2KAEKC,CAAAA,KAAK,WAAIC,OAAO,CAACC,GAAR,CAAYC,iBAAhB,kBAA0CL,MAA1C,EAAoD,CAC9EM,MAAM,CAAE,QADsE,CAE9EC,OAAO,CAAE,CACPC,MAAM,CAAE,kBADD,CAEP,eAAgB,kBAFT,CAGPC,aAAa,kBAAYR,KAAZ,CAHN,CAFqE,CAApD,CAFV,QAEZS,QAFY,iDAUXA,QAAQ,CAACC,IAAT,EAVW,8FAYXC,OAAO,CAACC,KAAR,8EAZW,wEAAH,kBAANgB,CAAAA,MAAM,kDAAZ","sourcesContent":["export const read = async (userId, token) => {\r\n  try {\r\n    const response = await fetch(`${process.env.REACT_APP_API_URI}/user/${userId}`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n    return response.json();\r\n  } catch (error) {\r\n    return console.error(\r\n      `Couldn't get response from api because of error: ${error}.`\r\n    );\r\n  }\r\n};\r\n\r\nexport const usersPerPage = async (page) => {\r\n  try {\r\n    const response = await fetch(`${process.env.REACT_APP_API_URI}/users/?page=${page}`, {\r\n      method: \"GET\",\r\n    });\r\n    return response.json();\r\n  } catch (error) {\r\n    return console.error(\r\n      `Couldn't get response from api because of error: ${error}.`\r\n      );\r\n    }\r\n};\r\n\r\nexport const updateUser = async (userId, token, user) => {\r\n  // console.log(`[front-end/src/user/apiUser.js => updateUser:46] : userId: ${userId}, token: ${token}, user: ${user}`);\r\n  try {\r\n    const response = await fetch(`${process.env.REACT_APP_API_URI}/user/${userId}`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      body: user,\r\n    });\r\n    return response.json();\r\n  } catch (error) {\r\n    return console.error(\r\n      `Couldn't put data to api because of error: ${error}.`\r\n    );\r\n  }\r\n};\r\n\r\nexport const updateInfo = (user, next) => {\r\n  if (typeof window !== \"undefined\") {\r\n    if (localStorage.getItem(\"jwt\")) {\r\n      // console.log(`[front-end/src/user/apiUser.js => updateInfo:67] : inside if (localStorage.getItem('jwt'))`);\r\n      let auth = JSON.parse(localStorage.getItem(\"jwt\"));\r\n      auth.user = user;\r\n      localStorage.setItem(\"jwt\", JSON.stringify(auth));\r\n      next();\r\n    }\r\n  }\r\n};\r\n\r\nexport const remove = async (userId, token) => {\r\n  try {\r\n    const response = await fetch(`${process.env.REACT_APP_API_URI}/user/${userId}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n    return response.json();\r\n  } catch (error) {\r\n    return console.error(\r\n      `Couldn't get response from api because of error: ${error}.`\r\n    );\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}