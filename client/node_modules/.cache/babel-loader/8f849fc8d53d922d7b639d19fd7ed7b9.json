{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";// Native modules import\nimport React,{Component}from\"react\";import{Link,Redirect}from\"react-router-dom\";// Personal modules import\nimport{signin,logUserIn}from\"../../logic/auth/index\";var Signin=/*#__PURE__*/function(_Component){_inherits(Signin,_Component);var _super=_createSuper(Signin);function Signin(){var _this;_classCallCheck(this,Signin);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={email:\"\",password:\"\",error:\"\",loading:false,redirection:false};_this.signinForm=function(email,password){return/*#__PURE__*/_jsxs(\"form\",{action:\"\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Email\",className:\"text-muted lead\",style:{fontWeight:\"bold\"},children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{onChange:_this.handleChange(\"email\"),type:\"email\",name:\"email\",className:\"form-control\",value:email,autoFocus:true,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Password\",className:\"text-muted lead\",style:{fontWeight:\"bold\"},children:\"Mot de passe\"}),/*#__PURE__*/_jsx(\"input\",{onChange:_this.handleChange(\"password\"),type:\"password\",name:\"password\",className:\"form-control\",value:password,required:true})]}),/*#__PURE__*/_jsx(\"button\",{onClick:_this.signinSubmit,type:\"submit\",className:\"btn btn-raised btn-primary\",children:\"Entrer dans la Taverne\"})]});};_this.handleChange=function(name){return function(event){_this.setState({error:\"\"});_this.setState(_defineProperty({},name,event.target.value));};};_this.signinSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var _this$state,email,password,user,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_this.setState({loading:true});_this$state=_this.state,email=_this$state.email,password=_this$state.password;user={email:email,password:password};if(!(\"\"!==email&&\"\"!==password)){_context.next=17;break;}_context.prev=5;_context.next=8;return signin(user);case 8:response=_context.sent;_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](5);console.error(\"Couldn't retrieve data using signin method.\");case 14:if(response.error){_this.setState({loading:false,error:response.error});}else{logUserIn(response,function(){_this.setState({redirection:true});});}_context.next=18;break;case 17:_this.setState({loading:false,error:\"Tu dois renseigner un e-mail et un mot de passe, sacrebleu !\"});case 18:case\"end\":return _context.stop();}}},_callee,null,[[5,11]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(Signin,[{key:\"render\",value:function render(){var _this$state2=this.state,email=_this$state2.email,password=_this$state2.password,error=_this$state2.error,redirection=_this$state2.redirection,loading=_this$state2.loading;if(redirection){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"jumbotron\",style:{margin:\"0\",padding:\"0\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",height:\"100vw\",width:\"100vw\"},children:/*#__PURE__*/_jsx(\"h3\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},children:\"Chargement...\"})}):/*#__PURE__*/_jsxs(\"div\",{className:\"container jumbotron\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mt-5 mb-2 text-center\",children:\"Bienvenue, moussaillon !\"}),/*#__PURE__*/_jsx(\"p\",{className:\"lead mb-5 text-center\",children:\"Connecte-toi pour acc\\xE9der aux fonctionnalit\\xE9s du site !\"}),/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-warning\",style:{display:error?\"\":\"none\"},children:error}),this.signinForm(email,password),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-raised btn-danger btn-sm\",children:/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",className:\"text\",style:{color:\"#ffffff\"},children:\"Mot de passe oubli\\xE9\"})})]})});}}]);return Signin;}(Component);export default Signin;","map":{"version":3,"sources":["C:/Users/virtuoworks/Desktop/taverne-des-soiffards/front-end/src/pages/core/Signin.jsx"],"names":["React","Component","Link","Redirect","signin","logUserIn","Signin","state","email","password","error","loading","redirection","signinForm","fontWeight","handleChange","signinSubmit","name","event","setState","target","value","preventDefault","user","response","console","margin","padding","display","justifyContent","alignItems","height","width","color"],"mappings":"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","sourcesContent":["// Native modules import\r\nimport React, { Component } from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\n\r\n// Personal modules import\r\nimport { signin, logUserIn } from \"../../logic/auth/index\";\r\n\r\nclass Signin extends Component {\r\n  state = {\r\n    email: \"\",\r\n    password: \"\",\r\n    error: \"\",\r\n    loading: false,\r\n    redirection: false,\r\n  };\r\n\r\n  signinForm = (email, password) => {\r\n    return (\r\n      <form action=\"\">\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"Email\" className=\"text-muted lead\" style={{fontWeight: \"bold\"}}>\r\n            E-mail\r\n          </label>\r\n          <input\r\n            onChange={this.handleChange(\"email\")}\r\n            type=\"email\"\r\n            name=\"email\"\r\n            className=\"form-control\"\r\n            value={email}\r\n            autoFocus\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"Password\" className=\"text-muted lead\" style={{fontWeight: \"bold\"}}>\r\n            Mot de passe\r\n          </label>\r\n          <input\r\n            onChange={this.handleChange(\"password\")}\r\n            type=\"password\"\r\n            name=\"password\"\r\n            className=\"form-control\"\r\n            value={password}\r\n            required\r\n          />\r\n        </div>\r\n        <button\r\n          onClick={this.signinSubmit}\r\n          type=\"submit\"\r\n          className=\"btn btn-raised btn-primary\"\r\n        >\r\n          Entrer dans la Taverne\r\n        </button>\r\n      </form>\r\n    );\r\n  };\r\n\r\n  handleChange = (name) => (event) => {\r\n    this.setState({\r\n      error: \"\",\r\n    });\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  signinSubmit = async (event) => {\r\n    event.preventDefault();\r\n    this.setState({\r\n      loading: true,\r\n    });\r\n    const { email, password } = this.state;\r\n    const user = { email, password };\r\n    if (\"\" !== email && \"\" !== password) {\r\n      let response;\r\n      try {\r\n        response = await signin(user);\r\n      } catch (error) {\r\n        console.error(`Couldn't retrieve data using signin method.`);\r\n      }\r\n      if (response.error) {\r\n        this.setState({\r\n          loading: false,\r\n          error: response.error,\r\n        });\r\n      } else {\r\n        logUserIn(response, () => {\r\n          this.setState({\r\n            redirection: true,\r\n          });\r\n        });\r\n      }\r\n    } else {\r\n      this.setState({\r\n        loading: false,\r\n        error: `Tu dois renseigner un e-mail et un mot de passe, sacrebleu !`,\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { email, password, error, redirection, loading } = this.state;\r\n    if (redirection) {\r\n      return <Redirect to=\"/\" />;\r\n    }\r\n    return (\r\n      <div className=\"container\">\r\n        {loading ? (\r\n          <div\r\n            className=\"jumbotron\"\r\n            style={{\r\n              margin: \"0\",\r\n              padding: \"0\",\r\n              display: \"flex\",\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\",\r\n              height: \"100vw\",\r\n              width: \"100vw\",\r\n            }}\r\n          >\r\n            <h3\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              Chargement...\r\n            </h3>\r\n          </div>\r\n        ) : (\r\n          <div className=\"container jumbotron\">\r\n            <h2 className=\"mt-5 mb-2 text-center\">Bienvenue, moussaillon !</h2>\r\n            <p className=\"lead mb-5 text-center\">Connecte-toi pour accéder aux fonctionnalités du site !</p>\r\n\r\n            <div\r\n              className=\"alert alert-warning\"\r\n              style={{ display: error ? \"\" : \"none\" }}\r\n            >\r\n              {error}\r\n            </div>\r\n\r\n            {this.signinForm(email, password)}\r\n            <button className=\"btn btn-raised btn-danger btn-sm\">\r\n              <Link to=\"/forgot-password\" className=\"text\" style={{color: \"#ffffff\"}}>\r\n                Mot de passe oublié\r\n              </Link>\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Signin;\r\n"]},"metadata":{},"sourceType":"module"}