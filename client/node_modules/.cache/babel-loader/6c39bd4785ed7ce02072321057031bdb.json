{"ast":null,"code":"var _s = $RefreshSig$();\n\n// Native modules import\nimport { useEffect, useRef, useState } from 'react';\nimport socketIOClient from 'socket.io-client';\nconst newTaverneMessage = \"newTaverneMessage\";\nconst socketUrl = \"http://localhost:9092\";\n\nconst TaverneChat = () => {\n  _s();\n\n  const [messages, setMessages] = useState([]);\n  const clientRef = useRef();\n  useEffect(() => {\n    clientRef.current = socketIOClient(socketUrl);\n    clientRef.current.on(newTaverneMessage, message => {\n      const newMessage = { ...message,\n        ownedByCurrentUser: message.sendId === clientRef.current.id\n      };\n      setMessages(message => [...messages, newMessage]);\n    });\n    return () => {\n      clientRef.current.disconnect();\n    };\n  });\n\n  const sendMessage = messageBody => {\n    clientRef.current.emit(newTaverneMessage, {\n      body: messageBody,\n      senderId: clientRef.current.id\n    });\n  };\n\n  return {\n    messages,\n    sendMessage\n  };\n};\n\n_s(TaverneChat, \"gN7J0LeU8bnWgWkoDi22B58TQ1k=\");\n\n_c = TaverneChat;\nexport default TaverneChat;\n\nvar _c;\n\n$RefreshReg$(_c, \"TaverneChat\");","map":{"version":3,"sources":["C:/Users/virtuoworks/Desktop/taverne-des-soiffards/front-end/src/chat/taverneChat.js"],"names":["useEffect","useRef","useState","socketIOClient","newTaverneMessage","socketUrl","TaverneChat","messages","setMessages","clientRef","current","on","message","newMessage","ownedByCurrentUser","sendId","id","disconnect","sendMessage","messageBody","emit","body","senderId"],"mappings":";;AAAA;AACA,SAAQA,SAAR,EAAmBC,MAAnB,EAA2BC,QAA3B,QAA0C,OAA1C;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AAEA,MAAMC,iBAAiB,GAAG,mBAA1B;AACA,MAAMC,SAAS,GAAG,uBAAlB;;AAEA,MAAMC,WAAW,GAAG,MAAM;AAAA;;AACxB,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BN,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAMO,SAAS,GAAGR,MAAM,EAAxB;AACAD,EAAAA,SAAS,CAAC,MAAM;AACdS,IAAAA,SAAS,CAACC,OAAV,GAAoBP,cAAc,CAACE,SAAD,CAAlC;AACAI,IAAAA,SAAS,CAACC,OAAV,CAAkBC,EAAlB,CAAqBP,iBAArB,EAAyCQ,OAAD,IAAa;AACnD,YAAMC,UAAU,GAAG,EACjB,GAAGD,OADc;AAEjBE,QAAAA,kBAAkB,EAAEF,OAAO,CAACG,MAAR,KAAmBN,SAAS,CAACC,OAAV,CAAkBM;AAFxC,OAAnB;AAIAR,MAAAA,WAAW,CAAEI,OAAD,IAAa,CAAC,GAAGL,QAAJ,EAAcM,UAAd,CAAd,CAAX;AACD,KAND;AAQA,WAAO,MAAM;AACXJ,MAAAA,SAAS,CAACC,OAAV,CAAkBO,UAAlB;AACD,KAFD;AAGD,GAbQ,CAAT;;AAcA,QAAMC,WAAW,GAAIC,WAAD,IAAiB;AACnCV,IAAAA,SAAS,CAACC,OAAV,CAAkBU,IAAlB,CAAuBhB,iBAAvB,EAA0C;AACxCiB,MAAAA,IAAI,EAAEF,WADkC;AAExCG,MAAAA,QAAQ,EAAEb,SAAS,CAACC,OAAV,CAAkBM;AAFY,KAA1C;AAID,GALD;;AAMA,SAAO;AAACT,IAAAA,QAAD;AAAWW,IAAAA;AAAX,GAAP;AACD,CAxBD;;GAAMZ,W;;KAAAA,W;AA0BN,eAAeA,WAAf","sourcesContent":["// Native modules import\r\nimport {useEffect, useRef, useState} from 'react';\r\nimport socketIOClient from 'socket.io-client';\r\n\r\nconst newTaverneMessage = \"newTaverneMessage\"\r\nconst socketUrl = \"http://localhost:9092\";\r\n\r\nconst TaverneChat = () => {\r\n  const [messages, setMessages] = useState([]);\r\n  const clientRef = useRef();\r\n  useEffect(() => {\r\n    clientRef.current = socketIOClient(socketUrl)\r\n    clientRef.current.on(newTaverneMessage, (message) => {\r\n      const newMessage = {\r\n        ...message,\r\n        ownedByCurrentUser: message.sendId === clientRef.current.id,\r\n      }\r\n      setMessages((message) => [...messages, newMessage])\r\n    })\r\n  \r\n    return () => {\r\n      clientRef.current.disconnect();\r\n    };\r\n  });\r\n  const sendMessage = (messageBody) => {\r\n    clientRef.current.emit(newTaverneMessage, {\r\n      body: messageBody,\r\n      senderId: clientRef.current.id\r\n    })\r\n  };\r\n  return {messages, sendMessage}\r\n};\r\n\r\nexport default TaverneChat;"]},"metadata":{},"sourceType":"module"}