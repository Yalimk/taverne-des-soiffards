{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";// Native modules import\nimport React,{Component}from\"react\";// Personal modules import\nimport{resetPassword}from\"../../logic/auth/index\";var ResetPassword=/*#__PURE__*/function(_Component){_inherits(ResetPassword,_Component);var _super=_createSuper(ResetPassword);function ResetPassword(){var _this;_classCallCheck(this,ResetPassword);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={newPassword:\"\",message:\"\",error:\"\"};_this.handleChange=function(name){return function(event){var newPassword=event.target.value;_this.setState({newPassword:newPassword,error:\"\",message:\"\"});};};_this.startResetProcess=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_this.setState({message:\"\",error:\"\"});_context.prev=2;console.info(\"[front-end/src/user/ResetPassword => startResetProcess:21] : newPassword (avant le fetch): \".concat(_this.state.newPassword));console.info(\"[front-end/src/user/ResetPassword => startResetProcess:24] : this.props.match.params.resetPasswordToken (avant le fetch): \".concat(_this.props.match.params.resetPasswordToken));_context.next=7;return resetPassword({newPassword:_this.state.newPassword,resetPasswordLink:_this.props.match.params.resetPasswordToken});case 7:data=_context.sent;// console.log(`[front-end/src/user/ResetPassword => startResetProcess:30] : data: ${data}`);\nif(data.error){console.error(\"[front-end/src/user/ResetPassword => startResetProcess:34] : data.error: \".concat(JSON.stringify(data.error)));_this.setState({error:data.error,newPassword:\"\"});}else{console.info(\"[front-end/src/user/ResetPassword => startResetProcess:39] : data.message: \".concat(JSON.stringify(data.message)));_this.setState({message:data.message,newPassword:\"\",redirectionSignIn:true});}_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);console.error(\"Password couldn't be reset because of error: \".concat(_context.t0));case 14:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(ResetPassword,[{key:\"render\",value:function render(){var _this$state=this.state,newPassword=_this$state.newPassword,message=_this$state.message,error=_this$state.error;// console.log(`[front-end/src/user/ResetPassword => render:57] : message: ${JSON.stringify(message)}`)\n// console.log(`[front-end/src/user/ResetPassword => render:58] : error: ${(JSON.stringify(error))}`)\n// console.log(`[front-end/src/user/ResetPassword => render:60] : newPassword: ${newPassword}`)\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"container jumbotron\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mt-5 mb-5\",children:\"Modification du mot de passe\"}),message&&/*#__PURE__*/_jsx(\"h5\",{className:\"alert alert-success\",children:message}),error&&/*#__PURE__*/_jsx(\"h5\",{className:\"alert alert-danger\",children:error}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group mt-5\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"Choisis ton nouveau mot de passe... et t\\xE2che de le noter cette fois-ci, mille sabords !\",value:newPassword,name:\"newPassword\",onChange:this.handleChange(\"newPassword\"),autoFocus:true})}),/*#__PURE__*/_jsx(\"button\",{onClick:this.startResetProcess,className:\"btn btn-raised btn-primary\",children:\"Modifier le mot de passe\"})]})]});}}]);return ResetPassword;}(Component);export default ResetPassword;","map":{"version":3,"sources":["C:/Users/virtuoworks/Desktop/taverne-des-soiffards/front-end/src/components/user/ResetPassword.jsx"],"names":["React","Component","resetPassword","ResetPassword","state","newPassword","message","error","handleChange","name","event","target","value","setState","startResetProcess","preventDefault","console","info","props","match","params","resetPasswordToken","resetPasswordLink","data","JSON","stringify","redirectionSignIn"],"mappings":"unCAAA;AACA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CAEA;AACA,OAASC,aAAT,KAA8B,wBAA9B,C,GAEMC,CAAAA,a,uVACJC,K,CAAQ,CACNC,WAAW,CAAE,EADP,CAENC,OAAO,CAAE,EAFH,CAGNC,KAAK,CAAE,EAHD,C,OAMRC,Y,CAAe,SAACC,IAAD,QAAU,UAACC,KAAD,CAAW,CAClC,GAAML,CAAAA,WAAW,CAAGK,KAAK,CAACC,MAAN,CAAaC,KAAjC,CACA,MAAKC,QAAL,CAAc,CACZR,WAAW,CAAEA,WADD,CAEZE,KAAK,CAAE,EAFK,CAGZD,OAAO,CAAE,EAHG,CAAd,EAKD,CAPc,E,OASfQ,iB,0FAAoB,iBAAOJ,KAAP,2HAClBA,KAAK,CAACK,cAAN,GACA,MAAKF,QAAL,CAAc,CAAEP,OAAO,CAAE,EAAX,CAAeC,KAAK,CAAE,EAAtB,CAAd,EAFkB,gBAIhBS,OAAO,CAACC,IAAR,sGACgG,MAAKb,KAAL,CAAWC,WAD3G,GAGAW,OAAO,CAACC,IAAR,qIAC+H,MAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,kBADvJ,GAPgB,sBAUGnB,CAAAA,aAAa,CAAC,CAC/BG,WAAW,CAAE,MAAKD,KAAL,CAAWC,WADO,CAE/BiB,iBAAiB,CAAE,MAAKJ,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,kBAFZ,CAAD,CAVhB,QAUVE,IAVU,eAchB;AACA,GAAIA,IAAI,CAAChB,KAAT,CAAgB,CACdS,OAAO,CAACT,KAAR,oFAC8EiB,IAAI,CAACC,SAAL,CAAeF,IAAI,CAAChB,KAApB,CAD9E,GAGA,MAAKM,QAAL,CAAc,CAAEN,KAAK,CAAEgB,IAAI,CAAChB,KAAd,CAAqBF,WAAW,CAAE,EAAlC,CAAd,EACD,CALD,IAKO,CACLW,OAAO,CAACC,IAAR,sFACgFO,IAAI,CAACC,SAAL,CAAeF,IAAI,CAACjB,OAApB,CADhF,GAGA,MAAKO,QAAL,CAAc,CAAEP,OAAO,CAAEiB,IAAI,CAACjB,OAAhB,CAAyBD,WAAW,CAAE,EAAtC,CAA0CqB,iBAAiB,CAAE,IAA7D,CAAd,EACD,CAzBe,iFA2BhBV,OAAO,CAACT,KAAR,sEA3BgB,qE,8IA+BX,iBACiC,KAAKH,KADtC,CACCC,WADD,aACCA,WADD,CACcC,OADd,aACcA,OADd,CACuBC,KADvB,aACuBA,KADvB,CAEP;AACA;AACA;AAEA,mBACE,aAAK,SAAS,CAAC,qBAAf,wBACE,WAAI,SAAS,CAAC,WAAd,0CADF,CAGGD,OAAO,eAAI,WAAI,SAAS,CAAC,qBAAd,UAAqCA,OAArC,EAHd,CAIGC,KAAK,eAAI,WAAI,SAAS,CAAC,oBAAd,UAAoCA,KAApC,EAJZ,cAME,qCACE,YAAK,SAAS,CAAC,iBAAf,uBACE,cACE,IAAI,CAAC,UADP,CAEE,SAAS,CAAC,cAFZ,CAGE,WAAW,CAAC,4FAHd,CAIE,KAAK,CAAEF,WAJT,CAKE,IAAI,CAAC,aALP,CAME,QAAQ,CAAE,KAAKG,YAAL,CAAkB,aAAlB,CANZ,CAOE,SAAS,KAPX,EADF,EADF,cAYE,eACE,OAAO,CAAE,KAAKM,iBADhB,CAEE,SAAS,CAAC,4BAFZ,sCAZF,GANF,GADF,CA4BD,C,2BAjFyBb,S,EAoF5B,cAAeE,CAAAA,aAAf","sourcesContent":["// Native modules import\r\nimport React, { Component } from \"react\";\r\n\r\n// Personal modules import\r\nimport { resetPassword } from \"../../logic/auth/index\";\r\n\r\nclass ResetPassword extends Component {\r\n  state = {\r\n    newPassword: \"\",\r\n    message: \"\",\r\n    error: \"\",\r\n  };\r\n\r\n  handleChange = (name) => (event) => {\r\n    const newPassword = event.target.value;\r\n    this.setState({\r\n      newPassword: newPassword,\r\n      error: \"\", \r\n      message: \"\" \r\n    });\r\n  };\r\n\r\n  startResetProcess = async (event) => {\r\n    event.preventDefault();\r\n    this.setState({ message: \"\", error: \"\" });\r\n    try {\r\n      console.info(\r\n        `[front-end/src/user/ResetPassword => startResetProcess:21] : newPassword (avant le fetch): ${this.state.newPassword}`\r\n      );\r\n      console.info(\r\n        `[front-end/src/user/ResetPassword => startResetProcess:24] : this.props.match.params.resetPasswordToken (avant le fetch): ${this.props.match.params.resetPasswordToken}`\r\n      );\r\n      const data = await resetPassword({\r\n        newPassword: this.state.newPassword,\r\n        resetPasswordLink: this.props.match.params.resetPasswordToken,\r\n      });\r\n      // console.log(`[front-end/src/user/ResetPassword => startResetProcess:30] : data: ${data}`);\r\n      if (data.error) {\r\n        console.error(\r\n          `[front-end/src/user/ResetPassword => startResetProcess:34] : data.error: ${JSON.stringify(data.error)}`\r\n        );\r\n        this.setState({ error: data.error, newPassword: \"\" });\r\n      } else {\r\n        console.info(\r\n          `[front-end/src/user/ResetPassword => startResetProcess:39] : data.message: ${JSON.stringify(data.message)}`\r\n        );\r\n        this.setState({ message: data.message, newPassword: \"\", redirectionSignIn: true });\r\n      }\r\n    } catch (error) {\r\n      console.error(`Password couldn't be reset because of error: ${error}`);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { newPassword, message, error } = this.state;\r\n    // console.log(`[front-end/src/user/ResetPassword => render:57] : message: ${JSON.stringify(message)}`)\r\n    // console.log(`[front-end/src/user/ResetPassword => render:58] : error: ${(JSON.stringify(error))}`)\r\n    // console.log(`[front-end/src/user/ResetPassword => render:60] : newPassword: ${newPassword}`)\r\n\r\n    return (\r\n      <div className=\"container jumbotron\">\r\n        <h2 className=\"mt-5 mb-5\">Modification du mot de passe</h2>\r\n\r\n        {message && <h5 className=\"alert alert-success\">{message}</h5>}\r\n        {error && <h5 className=\"alert alert-danger\">{error}</h5>}\r\n\r\n        <form>\r\n          <div className=\"form-group mt-5\">\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              placeholder=\"Choisis ton nouveau mot de passe... et tÃ¢che de le noter cette fois-ci, mille sabords !\"\r\n              value={newPassword}\r\n              name=\"newPassword\"\r\n              onChange={this.handleChange(\"newPassword\")}\r\n              autoFocus\r\n            />\r\n          </div>\r\n          <button\r\n            onClick={this.startResetProcess}\r\n            className=\"btn btn-raised btn-primary\"\r\n          >\r\n            Modifier le mot de passe\r\n          </button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ResetPassword;\r\n"]},"metadata":{},"sourceType":"module"}