{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";// Native modules import\nimport React,{Component}from\"react\";import{Link}from\"react-router-dom\";// Personal modules import\nimport{usersPerPage}from\"../../logic/user/apiUser\";import defaultProfilePic from\"../../images/default-image.png\";var Users=/*#__PURE__*/function(_Component){_inherits(Users,_Component);var _super=_createSuper(Users);function Users(){var _this;_classCallCheck(this,Users);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={users:[],page:1};_this.loadUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(page){var allUsers;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return usersPerPage(page);case 3:allUsers=_context.sent;// console.log(`[front-end/src/users/Users.jsx => loadUsers:18] : allUsers : ${allUsers}`);\n// console.log(`[front-end/src/users/Users.jsx => loadUsers:18] : type of allUsers : ${typeof allUsers}`);\nif(allUsers){_this.setState({users:allUsers});}else{console.error(\"No users were retrieved from the server because of error.\");}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(\"Couldn't list all users because of error: \".concat(_context.t0,\".\"));case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.getMoreUsers=function(num){_this.setState({page:_this.state.page+1});_this.loadUsers(_this.state.page+num);};_this.getLessUsers=function(num){_this.setState({page:_this.state.page-1});_this.loadUsers(_this.state.page-num);};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.loadUsers(_this.state.page);case 1:case\"end\":return _context2.stop();}}},_callee2);}));_this.renderUsers=function(users){return/*#__PURE__*/_jsx(\"div\",{className:\"row\",style:{justifyContent:\"center\",position:\"relative\"},children:users.map(function(user,i){var photo=user.photo,_id=user._id,pseudo=user.pseudo,about=user.about;if(photo){return/*#__PURE__*/_jsxs(\"div\",{className:\"card card-block col-sm-12 col-md-6 col-lg-4 col-xl-3\",style:{backgroundColor:\"#D9D9D9\",marginRight:\"30px\",marginBottom:\"30px\",boxShadow:\"3px 3px 5px grey\",borderRadius:\"3%\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-body text-center\",children:/*#__PURE__*/_jsx(\"img\",{style:{height:\"auto\",width:\"auto\",marginTop:\"15px\",borderRadius:\"25%\",boxShadow:\"3px 3px 10px grey\"},src:\"\".concat(process.env.REACT_APP_API_URI,\"/user/photo/\").concat(_id),onError:function onError(img){return img.target.src=\"\".concat(defaultProfilePic);},className:\"img-thumbnail mb-3\",alt:pseudo})},i),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h5\",{className:\"card-title text-center font-weight-bold mb-3\",children:pseudo}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text text-justify mb-5\",children:about}),/*#__PURE__*/_jsx(Link,{to:\"/user/\".concat(_id),className:\"btn btn-lg btn-block btn-outline-success text-center font-weight-bold mb-3\",children:\"Planque\"})]},i);}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"card card-block col-sm-12 col-md-6 col-lg-4 col-xl-3\",style:{backgroundColor:\"#D5E5F2\",marginRight:\"30px\",marginBottom:\"30px\"},children:[/*#__PURE__*/_jsx(\"img\",{style:{height:\"auto\",width:\"auto\",marginTop:\"15px\",borderRadius:\"50%\"},src:\"\".concat(defaultProfilePic),onError:function onError(img){return img.target.src=\"\".concat(defaultProfilePic);},className:\"img-thumbnail mb-3\",alt:pseudo}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body d-flex flex-column\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title text-center\",children:pseudo}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text mb-5\",children:about}),/*#__PURE__*/_jsx(Link,{to:\"/user/\".concat(_id),className:\"btn btn-lg btn-block btn-outline-success text-center font-weight-bold mb-3\",children:\"Planque\"})]},i)]},i);}})});};return _this;}_createClass(Users,[{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,users=_this$state.users,page=_this$state.page;return/*#__PURE__*/_jsxs(\"div\",{className:\"jumbotron\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mt-3 mb-5 text-center\",style:{fontWeight:\"bold\"},children:!users.length?\"Rien à afficher pour le moment...\":\"Les Pirates de la Taverne des Soiffards\"}),this.renderUsers(users),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col text-right\",children:page>1?/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-raised btn-info mt-5 mb-5\",onClick:function onClick(){return _this2.getLessUsers(1);},style:{boxShadow:\"3px 3px 5px grey\"},children:\"Page pr\\xE9c\\xE9dente\"}):\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col text-left\",children:users.length>page&&users.length===Number(process.env.REACT_APP_PER_PAGE)?/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-raised btn-info mt-5 mb-5\",onClick:function onClick(){return _this2.getMoreUsers(1);},style:{boxShadow:\"3px 3px 5px grey\"},children:\"Page suivante\"}):\"\"})]})]});}}]);return Users;}(Component);export default Users;","map":{"version":3,"sources":["C:/Users/virtuoworks/Desktop/taverne-des-soiffards/client/src/pages/user/Users.jsx"],"names":["React","Component","Link","usersPerPage","defaultProfilePic","Users","state","users","page","loadUsers","allUsers","setState","console","error","getMoreUsers","num","getLessUsers","componentDidMount","renderUsers","justifyContent","position","map","user","i","photo","_id","pseudo","about","backgroundColor","marginRight","marginBottom","boxShadow","borderRadius","height","width","marginTop","process","env","REACT_APP_API_URI","img","target","src","fontWeight","length","Number","REACT_APP_PER_PAGE"],"mappings":"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","sourcesContent":["// Native modules import\r\nimport React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n// Personal modules import\r\nimport { usersPerPage } from \"../../logic/user/apiUser\";\r\nimport defaultProfilePic from \"../../images/default-image.png\";\r\n\r\nclass Users extends Component {\r\n  state = {\r\n    users: [],\r\n    page: 1\r\n  };\r\n\r\n  loadUsers = async (page) => {\r\n    try {\r\n      const allUsers = await usersPerPage(page);\r\n      // console.log(`[front-end/src/users/Users.jsx => loadUsers:18] : allUsers : ${allUsers}`);\r\n      // console.log(`[front-end/src/users/Users.jsx => loadUsers:18] : type of allUsers : ${typeof allUsers}`);\r\n      if (allUsers) {\r\n        this.setState({\r\n          users: allUsers,\r\n        });\r\n      } else {\r\n        console.error(\r\n          `No users were retrieved from the server because of error.`\r\n        );\r\n      }\r\n    } catch (error) {\r\n      console.error(`Couldn't list all users because of error: ${error}.`);\r\n    }\r\n  };\r\n\r\n  getMoreUsers = (num) => {\r\n    this.setState({ page: this.state.page + 1 });\r\n    this.loadUsers(this.state.page + num);\r\n  };\r\n\r\n  getLessUsers = (num) => {\r\n    this.setState({ page: this.state.page - 1 });\r\n    this.loadUsers(this.state.page - num);\r\n  };\r\n\r\n  componentDidMount = async () => {\r\n    this.loadUsers(this.state.page);\r\n  };\r\n\r\n  renderUsers = (users) => (\r\n    <div\r\n      className=\"row\"\r\n      style={{ justifyContent: \"center\", position: \"relative\" }}\r\n    >\r\n      {users.map((user, i) => {\r\n        const { photo, _id, pseudo, about } = user;\r\n        if (photo) {\r\n          return (\r\n            <div\r\n              className=\"card card-block col-sm-12 col-md-6 col-lg-4 col-xl-3\"\r\n              key={i}\r\n              style={{\r\n                backgroundColor: \"#D9D9D9\",\r\n                marginRight: \"30px\",\r\n                marginBottom: \"30px\",\r\n                boxShadow: \"3px 3px 5px grey\",\r\n                borderRadius: \"3%\"\r\n              }}\r\n            >\r\n\r\n              <div className=\"card-body text-center\" key={i}>\r\n              <img\r\n                style={{\r\n                  height: \"auto\",\r\n                  width: \"auto\",\r\n                  marginTop: \"15px\",\r\n                  borderRadius: \"25%\",\r\n                  boxShadow: \"3px 3px 10px grey\"\r\n                }}\r\n                src={`${process.env.REACT_APP_API_URI}/user/photo/${_id}`}\r\n                onError={(img) => (img.target.src = `${defaultProfilePic}`)}\r\n                className=\"img-thumbnail mb-3\"\r\n                alt={pseudo}\r\n              />\r\n              </div>\r\n                <hr/>\r\n                <h5 className=\"card-title text-center font-weight-bold mb-3\">\r\n                  {pseudo}\r\n                </h5>\r\n                <p className=\"card-text text-justify mb-5\">{about}</p>\r\n              <Link\r\n                to={`/user/${_id}`}\r\n                className=\"btn btn-lg btn-block btn-outline-success text-center font-weight-bold mb-3\"\r\n              >\r\n                Planque\r\n              </Link>\r\n            </div>\r\n          );\r\n        } else {\r\n          return (\r\n            <div\r\n              className=\"card card-block col-sm-12 col-md-6 col-lg-4 col-xl-3\"\r\n              key={i}\r\n              style={{\r\n                backgroundColor: \"#D5E5F2\",\r\n                marginRight: \"30px\",\r\n                marginBottom: \"30px\",\r\n              }}\r\n            >\r\n              <img\r\n                style={{\r\n                  height: \"auto\",\r\n                  width: \"auto\",\r\n                  marginTop: \"15px\",\r\n                  borderRadius: \"50%\",\r\n                }}\r\n                src={`${defaultProfilePic}`}\r\n                onError={(img) => (img.target.src = `${defaultProfilePic}`)}\r\n                className=\"img-thumbnail mb-3\"\r\n                alt={pseudo}\r\n              />\r\n              <div className=\"card-body d-flex flex-column\" key={i}>\r\n                <h5 className=\"card-title text-center\">{pseudo}</h5>\r\n                <p className=\"card-text mb-5\">{about}</p>\r\n                <Link\r\n                  to={`/user/${_id}`}\r\n                  className=\"btn btn-lg btn-block btn-outline-success text-center font-weight-bold mb-3\"\r\n                >\r\n                  Planque\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          );\r\n        }\r\n      })}\r\n    </div>\r\n  );\r\n\r\n  render() {\r\n    const { users, page} = this.state;\r\n    return (\r\n      <div className=\"jumbotron\">\r\n        <h2 className=\"mt-3 mb-5 text-center\" style={{ fontWeight: \"bold\" }}>\r\n        {!users.length\r\n            ? \"Rien à afficher pour le moment...\"\r\n            : \"Les Pirates de la Taverne des Soiffards\"}\r\n        </h2>\r\n        {this.renderUsers(users)}\r\n\r\n        <div className=\"row\">\r\n          <div className=\"col text-right\">\r\n            {page > 1 ? (\r\n              <button\r\n                className=\"btn btn-raised btn-info mt-5 mb-5\"\r\n                onClick={() => this.getLessUsers(1)}\r\n                style={{boxShadow: \"3px 3px 5px grey\"}}\r\n              >\r\n                Page précédente\r\n              </button>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"col text-left\">\r\n            {/* {console.log('users.length: ', users.length)}\r\n            {console.log('page: ', page)}\r\n            {console.log('process.env.PER_PAGE: ', process.env.REACT_APP_PER_PAGE)} */}\r\n            {(users.length > page && users.length === Number(process.env.REACT_APP_PER_PAGE)) ? (\r\n              <button\r\n                className=\"btn btn-raised btn-info mt-5 mb-5\"\r\n                onClick={() => this.getMoreUsers(1)}\r\n                style={{boxShadow: \"3px 3px 5px grey\"}}\r\n              >\r\n                Page suivante\r\n              </button>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Users;\r\n"]},"metadata":{},"sourceType":"module"}