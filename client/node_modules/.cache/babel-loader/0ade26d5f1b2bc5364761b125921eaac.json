{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/virtuoworks/Desktop/taverne-des-soiffards/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";export var signup=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(newUser){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(process.env.REACT_APP_API_URI,\"/signup\"),{method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify(newUser)});case 3:res=_context.sent;_context.next=6;return res.json();case 6:return _context.abrupt(\"return\",_context.sent);case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function signup(_x){return _ref.apply(this,arguments);};}();export var signin=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(user){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"\".concat(process.env.REACT_APP_API_URI,\"/signin\"),{method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify(user)});case 3:res=_context2.sent;_context2.next=6;return res.json();case 6:return _context2.abrupt(\"return\",_context2.sent);case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function signin(_x2){return _ref2.apply(this,arguments);};}();export var signout=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(redirect){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(typeof window!==\"undefined\")){_context3.next=7;break;}localStorage.removeItem(\"jwt\");redirect();_context3.next=5;return fetch(\"\".concat(process.env.REACT_APP_API_URI,\"/signout\"),{method:\"GET\"});case 5:response=_context3.sent;return _context3.abrupt(\"return\",response.json({message:\"User disconnected\"}));case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function signout(_x3){return _ref3.apply(this,arguments);};}();export var logUserIn=function logUserIn(jwt,redirect){if(typeof window!==\"undefined\"){localStorage.setItem(\"jwt\",JSON.stringify(jwt));}redirect();};export var isLoggedIn=function isLoggedIn(){if(typeof window===\"undefined\"){return false;}if(localStorage.getItem(\"jwt\")){// console.log(`[front-end/src/auth/index.js => isLoggedIn:58] : localStorage.getItem(\"jwt\"): `, localStorage.getItem(\"jwt\"))\nreturn JSON.parse(localStorage.getItem(\"jwt\"));}else{return false;}};export var forgotPassword=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(email){var response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.info(\"[front-end/auth/index.js => forgotPassword:67] : email: \".concat(email));_context4.prev=1;_context4.next=4;return fetch(\"\".concat(process.env.REACT_APP_API_URI,\"/forgot-password/\"),{method:\"PUT\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email})});case 4:response=_context4.sent;console.log('[front-end/auth/index.js => forgotPassword:81] : response: ',response);return _context4.abrupt(\"return\",response.json());case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](1);console.error(\"[front-end/src/auth/index.js => forgotPassword:85] : error: \".concat(_context4.t0,\".\"));case 12:case\"end\":return _context4.stop();}}},_callee4,null,[[1,9]]);}));return function forgotPassword(_x4){return _ref4.apply(this,arguments);};}();export var resetPassword=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(newCredentials){var response;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return fetch(\"\".concat(process.env.REACT_APP_API_URI,\"/reset-password/\"),{method:\"PUT\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify(newCredentials)});case 3:response=_context5.sent;_context5.next=6;return response.json();case 6:return _context5.abrupt(\"return\",_context5.sent);case 9:_context5.prev=9;_context5.t0=_context5[\"catch\"](0);console.error(\"[front-end/auth/index.js => resetPassword:101] : error: \".concat(_context5.t0,\".\"));case 12:case\"end\":return _context5.stop();}}},_callee5,null,[[0,9]]);}));return function resetPassword(_x5){return _ref5.apply(this,arguments);};}();","map":{"version":3,"sources":["C:/Users/virtuoworks/Desktop/taverne-des-soiffards/front-end/src/logic/auth/index.js"],"names":["signup","newUser","fetch","process","env","REACT_APP_API_URI","method","headers","Accept","body","JSON","stringify","res","json","console","log","signin","user","signout","redirect","window","localStorage","removeItem","response","message","logUserIn","jwt","setItem","isLoggedIn","getItem","parse","forgotPassword","email","info","error","resetPassword","newCredentials"],"mappings":"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","sourcesContent":["export const signup = async (newUser) => {\r\n  try {\r\n    const res = await fetch(`${process.env.REACT_APP_API_URI}/signup`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(newUser),\r\n    });\r\n    return await res.json();\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nexport const signin = async (user) => {\r\n  try {\r\n    const res = await fetch(`${process.env.REACT_APP_API_URI}/signin`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(user),\r\n    });\r\n    return await res.json();\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nexport const signout = async (redirect) => {\r\n  if (typeof window !== \"undefined\") {\r\n    localStorage.removeItem(\"jwt\");\r\n    redirect();\r\n    const response = await fetch(`${process.env.REACT_APP_API_URI}/signout`, {\r\n      method: \"GET\",\r\n    });\r\n    return response.json({\r\n      message: \"User disconnected\",\r\n    });\r\n  }\r\n};\r\n\r\nexport const logUserIn = (jwt, redirect) => {\r\n  if (typeof window !== \"undefined\") {\r\n    localStorage.setItem(\"jwt\", JSON.stringify(jwt));\r\n  }\r\n  redirect();\r\n};\r\n\r\nexport const isLoggedIn = () => {\r\n  if (typeof window === \"undefined\") {\r\n    return false;\r\n  }\r\n  if (localStorage.getItem(\"jwt\")) {\r\n    // console.log(`[front-end/src/auth/index.js => isLoggedIn:58] : localStorage.getItem(\"jwt\"): `, localStorage.getItem(\"jwt\"))\r\n    return JSON.parse(localStorage.getItem(\"jwt\"));\r\n  } else {\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const forgotPassword = async (email) => {\r\n  console.info(\r\n    `[front-end/auth/index.js => forgotPassword:67] : email: ${email}`\r\n  );\r\n  try {\r\n    const response = await fetch(\r\n      `${process.env.REACT_APP_API_URI}/forgot-password/`,\r\n      {\r\n        method: \"PUT\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ email }),\r\n      }\r\n    );\r\n    console.log('[front-end/auth/index.js => forgotPassword:81] : response: ', response);\r\n    return response.json();\r\n  } catch (error) {\r\n    console.error(\r\n      `[front-end/src/auth/index.js => forgotPassword:85] : error: ${error}.`\r\n    );\r\n  }\r\n};\r\n\r\nexport const resetPassword = async (newCredentials) => {\r\n  // console.log(`[front-end/auth/index.js => resetPassword:91] : newCredentials: ${JSON.stringify(newCredentials)}`)\r\n  try {\r\n    const response = await fetch(`${process.env.REACT_APP_API_URI}/reset-password/`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(newCredentials)\r\n    });\r\n    // console.log(`[front-end/auth/index.js => resetPassword:101] : response: ${response}`);\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error(`[front-end/auth/index.js => resetPassword:101] : error: ${error}.`)\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}